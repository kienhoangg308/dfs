# This is a template Makefile generated by rpcgen

# Parameters

CLIENT = nfs_client
SERVER = nfs_server

# Source files
SOURCES_CLNT.c = nfs_clnt.c nfs_client.c nfs_xdr.c
SOURCES_CLNT.h =
SOURCES_SVC.c = nfs_svc.c nfs_server.c nfs_xdr.c
SOURCES_SVC.h =
SOURCES.x = nfs.x

# Compiler and Linker Config
CC = gcc
CXX = g++
RM = rm -f

# Object files
OBJECTS_CLNT = $(SOURCES_CLNT.c:%.c=%.o)
OBJECTS_SVC = $(SOURCES_SVC.c:%.c=%.o)

# Compiler flags
CFLAGS = -g -Wall -I/usr/include/tirpc
CXXFLAGS = -g -Wall -std=c++11
LDLIBS = -lnsl -ltirpc

# Targets
all : $(CLIENT) $(SERVER)

# Pattern rule for compiling C files
%.o: %.c
	$(CC) $(CFLAGS) -c $< -o $@

# Pattern rule for compiling C++ files
%.o: %.cpp
	$(CXX) $(CXXFLAGS) -c $< -o $@

# Linking the client and server executables
$(CLIENT) : $(OBJECTS_CLNT)
	$(CXX) -o $(CLIENT) $(OBJECTS_CLNT) $(LDLIBS)

$(SERVER) : $(OBJECTS_SVC)
	$(CXX) -o $(SERVER) $(OBJECTS_SVC) $(LDLIBS)

clean:
	$(RM) $(OBJECTS_CLNT) $(OBJECTS_SVC) $(CLIENT) $(SERVER)

clean_all:
	$(RM) $(OBJECTS_CLNT) $(OBJECTS_SVC) $(CLIENT) $(SERVER) Makefile.nfs
